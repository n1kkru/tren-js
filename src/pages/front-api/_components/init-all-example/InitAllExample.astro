---
interface Props {
  class?: string
}

const { class: className, ...props } = Astro.props as Props

export { InitAllExample }
---

<div
  class:list={['init-all-example', className]}
  {...props}
>
  <div class="space-y-6 rounded-lg bg-gray-100 p-6">
    <h1 class="mb-4 text-2xl font-bold">window.frontApi.initAll()</h1>
    <p class="mb-4 text-lg font-bold text-sky-600">Глобальная инициализация</p>

    <div class="rounded bg-white p-4 shadow">
      <h2 class="text-lg font-semibold">window.frontApi.initAll()</h2>
      <p class="text-sm text-gray-600">
        Вызывает <code>initAll()</code> у всех доступных компонентов.
      </p>
      <button
        id="frontapi-init-all"
        class="mt-2 rounded bg-emerald-600 px-4 py-2 text-white"
        >Инициализировать всё</button
      >
      <pre
        class="mt-2 rounded bg-gray-100 p-3 text-sm text-gray-800"><code>{`window.frontApi.initAll()`}</code></pre>
    </div>
  </div>
</div>

<script>
  const frontapiInitAllButton = document.getElementById('frontapi-init-all') as HTMLButtonElement
  if (frontapiInitAllButton) {
    frontapiInitAllButton.addEventListener('click', () => {
      window.frontApi.initAll()
    })
  }
</script>
